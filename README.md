# Who Is To Blame - DOTA2抓畜工具

基于科学方法论的DOTA2比赛失利责任分析工具

## 项目简介

这是一个专业的DOTA2比赛分析工具,能够基于多维度数据客观识别比赛中表现最差的玩家。通过分析对线数据、经济数据、团战数据、克制关系等多个维度,科学地计算出每个玩家的"畜度",并找出真正应该为失利负责的"畜生"。

**核心特点**:
- 🎯 **客观公正**: 基于OpenDota真实数据,而非主观判断
- 📊 **多维分析**: 综合考虑对线、团战、经济、克制等多个维度
- ⚖️ **公平调整**: 考虑位置差异、克制关系、经济背景等因素
- 🎪 **娱乐性强**: 幽默的罪状描述和惩罚建议
- 📝 **详细报告**: 生成完整的Markdown分析报告

## 项目结构

```
/d/projects/who-is-to-blame/
├── README.md                          # 项目说明
├── docs/
│   └── methodology.md                 # 科学方法论文档
├── skills/
│   └── who-is-to-blame/
│       ├── skill.md                   # Skill主文件
│       └── references/
│           ├── data-mapping.md        # 数据字段映射表
│           ├── analysis-logic.md      # 分析逻辑详解
│           ├── error-handling.md      # 错误处理指南
│           └── output-template.md     # 输出格式模板
├── data/
│   ├── history.json                   # 历史分析记录
│   └── cache/                         # 克制数据缓存
└── results/                           # 分析报告输出目录
    └── {match_id}.md                  # 单场比赛分析报告
```

## 快速开始

### 使用方法

#### 斜杠命令
```bash
/抓畜 8669004890
/找畜生 8669004890
/背锅侠 8669004890
```

#### 自然语言
```
帮我分析比赛8669004890,看看谁最坑
这局谁最菜? ID是8669004890
找出比赛8669004890中的畜生
```

### 工作流程

1. **输入比赛ID** - 提供一个DOTA2比赛ID
2. **自动获取数据** - 从OpenDota和ProTracker获取数据
3. **智能分析** - 识别失误、计算畜度、判定畜生
4. **生成报告** - 输出详细的Markdown分析报告
5. **保存结果** - 报告保存到results目录

### 示例输出

```
🐷 抓畜结果
==================================================

【畜生】ssdsdbcx (戴泽)
畜度: 172.8/200
主要罪状:
  - SSS级: 作为治疗英雄治疗量严重不足
  - SS级: 团战贡献极低
  - S级: 资源严重浪费

完整报告已保存到:
  /d/projects/who-is-to-blame/results/8669004890.md

==================================================
```

## 技术架构

### 数据来源

- **OpenDota**: 比赛基础数据、对线数据、团战数据等
- **ProTracker**: 英雄克制关系数据

### 核心技术

- **Chrome DevTools MCP**: 网页数据爬取
- **数据分析引擎**: Python/JavaScript逻辑
- **Markdown生成**: 报告格式化

### 分析维度

1. **对线表现** (前10分钟)
   - 补刀效率
   - 对线胜率
   - 经济领先/落后

2. **经济数据**
   - GPM/XPM
   - 经济转化率
   - 资源占比

3. **团战表现**
   - 参团率
   - 团战伤害/治疗
   - 团战存活情况

4. **英雄克制**
   - 被克制情况
   - 克制对手情况
   - BP阶段选择

5. **位置职责**
   - 1-5号位职责差异
   - 位置特定评判标准

## 方法论

完整的分析方法论请参考: [docs/methodology.md](docs/methodology.md)

### 失误分级系统

- **SSS级**: 致命失误,基础畜度+100
- **SS级**: 严重失误,基础畜度+80
- **S级**: 重大失误,基础畜度+60
- **A级**: 明显失误,基础畜度+40
- **B-F级**: 较轻失误,基础畜度+10-30

### 系数调整

最终畜度 = 基础畜度 × 克制系数 × 位置系数 × 经济背景系数

- **克制系数**: 0.7-1.3 (被克制降低,克制对手提高)
- **位置系数**: 0.8-1.2 (核心位责任大)
- **经济背景系数**: 0.8-1.2 (考虑全队经济形势)

### 畜生判定规则

- 默认抓1个最畜的
- 如果第2名畜度>80分,也算畜生
- 最多抓2个
- 考虑位置平衡,避免"辅助背锅"

## 详细文档

### Skill使用指南

完整的Skill使用说明: [skills/who-is-to-blame/skill.md](skills/who-is-to-blame/skill.md)

### 参考文档

- [数据字段映射表](skills/who-is-to-blame/references/data-mapping.md) - 详细说明如何从OpenDota获取数据
- [分析逻辑详解](skills/who-is-to-blame/references/analysis-logic.md) - 失误识别规则和畜度计算方法
- [错误处理指南](skills/who-is-to-blame/references/error-handling.md) - 异常情况处理和用户体验优化
- [输出格式模板](skills/who-is-to-blame/references/output-template.md) - 报告生成格式标准

## 注意事项

### 使用限制

- ✅ 仅分析输掉比赛的一方
- ✅ 需要稳定的网络连接
- ✅ 首次分析可能需要1-2分钟(触发OpenDota分析)
- ✅ 需要比赛有完整的回放数据

### 数据隐私

- 所有数据来自公开的OpenDota API
- 不会存储任何用户隐私信息
- 分析报告仅保存在本地

### 免责声明

- 本工具仅供娱乐,请理性看待游戏胜负
- 分析结果基于客观数据,但可能无法完全反映游戏中的所有因素
- DOTA2是一个团队游戏,失利往往是多方面因素的结果
- 请友善对待队友,游戏是为了快乐 🎮

## 常见问题

### Q: 为什么只分析输的一方?

A: 因为赢的一方没有畜生,只有英雄!本工具的目的是找出导致失利的主要责任人。

### Q: 如果全队表现都很差怎么办?

A: 如果所有人畜度都很高,说明是团队整体问题。工具会指出这一点,并列出需要改进的地方。

### Q: 克制数据是实时的吗?

A: 克制数据来自ProTracker,基于职业比赛数据,相对稳定。会缓存一周以提高性能。

### Q: 分析需要多长时间?

A: 通常15-30秒。如果比赛未分析过,首次需要1-2分钟触发OpenDota分析。

### Q: 可以分析很久以前的比赛吗?

A: 可以,只要OpenDota上有该比赛的数据即可。

### Q: 辅助是不是更容易被判定为畜生?

A: 不会。工具使用位置系数(辅助×0.8-0.9),降低了辅助的责任权重。同时有位置平衡机制,避免"辅助背锅"。

## 贡献指南

欢迎贡献代码、报告问题或提出建议!

### 如何贡献

1. Fork本项目
2. 创建特性分支
3. 提交你的修改
4. 推送到分支
5. 创建Pull Request

### 报告问题

如果发现bug或有改进建议,请在Issues中提出,包含:
- 比赛ID
- 错误描述
- 预期行为
- 实际行为

## 更新日志

### v1.0.0 (2026-01-30)

- ✅ 初始版本发布
- ✅ 实现完整的数据获取功能
- ✅ 实现SSS-F级失误识别系统
- ✅ 实现畜度计算和系数调整
- ✅ 实现Markdown报告生成
- ✅ 完整的错误处理和用户体验优化

## 致谢

- **OpenDota**: 提供免费的DOTA2数据API
- **ProTracker**: 提供职业比赛数据和英雄克制关系
- **Claude Code**: 提供强大的AI辅助开发能力
- **DOTA2社区**: 灵感来源

## 许可证

本项目采用 MIT 许可证

---

**Remember**: It's just a game, have fun! 🎮

*如果这个工具帮你找到了队伍里的畜生,请给它一个Star ⭐*
