# 输出格式模板

本文档定义分析报告的标准输出格式。

## 报告结构

完整的分析报告包含以下部分:

1. 标题与比赛信息
2. 克制关系说明
3. 畜生判定结果
4. 罪状详情
5. 数据对比表格
6. 畜度计算过程
7. 全队排名
8. 幽默惩罚建议
9. 一句话总结

## 完整模板

```markdown
# 🐷 DOTA2抓畜报告

> 比赛ID: {match_id}
> 分析时间: {analysis_time}
> 胜者: {winner_side}
> 输者: {loser_side}

---

## 📊 比赛基础信息

| 项目 | 详情 |
|-----|------|
| 比赛模式 | {game_mode} |
| 比赛时长 | {duration} |
| 地区服务器 | {region} |
| 最终比分 | {radiant_kills} - {dire_kills} |

---

## 🎭 阵容与克制关系

### {loser_side}阵容(输方)

| 位置 | 玩家 | 英雄 | 选人顺序 |
|-----|------|------|---------|
| {position} | {player_name} | {hero_name} | 第{pick_order}手 |
| ... | ... | ... | ... |

### 克制关系分析

{每个英雄的克制情况}

**{hero_name}**:
- 被克制: {countered_by_heroes} (平均胜率: {avg_winrate}%)
- 克制对手: {counters_heroes} (平均胜率: {avg_winrate}%)
- 克制系数: {counter_coefficient}

---

## 🎯 畜生判定

经过科学分析,本场比赛的畜生是:

### 🐷 第一畜: {bastard_name} ({bastard_hero})

**畜度**: {final_score} / 200
**位置**: {position}号位
**基础畜度**: {base_score}
**克制系数**: {counter_coef}
**位置系数**: {position_coef}
**经济背景系数**: {economic_coef}

---

## 📋 罪状详情

### {bastard_name}的罪状

#### 【SSS级罪状】{failure_description}
- {data_point_1}: {value} ({comparison})
- {data_point_2}: {value} ({comparison})
- {data_point_3}: {value} ({comparison})
- **严重程度**: 极其严重,直接导致比赛失利
- **数据来源**: {data_source}

#### 【SS级罪状】{failure_description}
- {data_point_1}: {value} ({comparison})
- {data_point_2}: {value} ({comparison})
- **严重程度**: 非常严重
- **数据来源**: {data_source}

#### 【S级罪状】{failure_description}
...

#### 【A级罪状】{failure_description}
...

---

## 📊 数据对比

### 核心数据对比

| 指标 | {bastard_name} | 队内平均 | 队内最佳 | 对手同位置 |
|-----|---------------|---------|---------|----------|
| KDA | {kda} | {team_avg} | {team_best} | {enemy_pos} |
| GPM | {gpm} | {team_avg} | {team_best} | {enemy_pos} |
| XPM | {xpm} | {team_avg} | {team_best} | {enemy_pos} |
| 英雄伤害 | {hero_damage} | {team_avg} | {team_best} | {enemy_pos} |
| 参团率 | {participation}% | {team_avg}% | {team_best}% | {enemy_pos}% |
| 对线胜率 | {lane_winrate}% | {team_avg}% | {team_best}% | - |

### 对线数据对比(前10分钟)

| 指标 | {bastard_name} | 对手 | 差距 |
|-----|---------------|------|------|
| 正补 | {last_hits} | {enemy_lh} | {diff} ({diff_pct}%) |
| 反补 | {denies} | {enemy_denies} | {diff} |
| 对线胜率 | {lane_wr}% | {enemy_wr}% | {diff}% |

### 团战表现对比

| 团战时间 | {bastard_name}表现 | 队友平均 | 说明 |
|---------|------------------|---------|------|
| {time} | 伤害{dmg}/死亡{death} | 伤害{avg_dmg} | {note} |
| ... | ... | ... | ... |

---

## 🧮 畜度计算过程

### {bastard_name}的畜度计算

**失误汇总**:
- SSS级失误 × {count} = {score}分
- SS级失误 × {count} = {score}分
- S级失误 × {count} = {score}分
- A级失误 × {count} = {score}分
- 其他失误 = {score}分

**基础畜度** = {base_score}分

**系数调整**:
- 克制系数: {counter_coef} (被{countered_count}个英雄克制)
- 位置系数: {position_coef} ({position}号位)
- 经济背景系数: {economic_coef} (全队经济{economic_status})

**最终畜度** = {base_score} × {counter_coef} × {position_coef} × {economic_coef}
           = **{final_score}分**

---

## 📈 全队畜度排名

| 排名 | 玩家 | 英雄 | 位置 | 基础畜度 | 最终畜度 | 评价 |
|-----|------|------|------|---------|---------|------|
| 1 🐷 | {name} | {hero} | {pos} | {base} | {final} | **畜生** |
| 2 | {name} | {hero} | {pos} | {base} | {final} | {comment} |
| 3 | {name} | {hero} | {pos} | {base} | {final} | {comment} |
| 4 | {name} | {hero} | {pos} | {base} | {final} | {comment} |
| 5 | {name} | {hero} | {pos} | {base} | {final} | {comment} |

**评价标准**:
- 畜度 > 100: 🐷 畜生
- 畜度 80-100: ⚠️ 表现糟糕
- 畜度 60-80: ⚠️ 表现不佳
- 畜度 40-60: 😐 表现一般
- 畜度 20-40: 😊 表现尚可
- 畜度 < 20: 👍 表现良好

---

## 🎪 惩罚建议

{bastard_name},作为本场比赛的畜生,我们建议你:

{幽默惩罚列表}

---

## 💬 一句话总结

{幽默评价或犀利提问}

---

## ⚙️ 分析说明

- **方法论版本**: v1.0 (基于科学数据分析)
- **数据来源**: OpenDota + ProTracker
- **分析时间**: {analysis_timestamp}
- **数据完整度**: {data_completeness}%

{如果有数据缺失}
### ⚠️ 数据说明
- {missing_data_note}

---

*本报告由 who-is-to-blame Skill 自动生成*
*仅供娱乐,请理性看待游戏胜负* 🎮
```

## 各部分详细说明

### 1. 标题与比赛信息

简洁明了,包含关键信息:

```markdown
# 🐷 DOTA2抓畜报告

> 比赛ID: 8669004890
> 分析时间: 2026-01-30 15:30:45
> 胜者: 夜魇
> 输者: 天辉
```

### 2. 克制关系说明

展示每个英雄的克制情况,便于理解系数调整:

```markdown
**戴泽(中单)**:
- 被克制:
  - 剃刀(胜率38.2%,严重克制)
  - 冥界亚龙(胜率41.5%,克制)
  - 赏金猎人(胜率44.1%,轻度克制)
- 克制对手: 无
- 克制系数: 0.7 (被多个英雄克制)

**说明**: 戴泽在本局BP中处于严重劣势,被对面3个英雄克制,这一定程度解释了其表现不佳。但即使考虑克制因素,其表现仍然是队内最差。
```

### 3. 畜生判定结果

突出显示畜生,使用emoji和醒目格式:

```markdown
## 🎯 畜生判定

经过科学分析,本场比赛的畜生是:

### 🐷 第一畜: ssdsdbcx (戴泽)

**畜度**: 172.8 / 200
**位置**: 2号位(中单)
**基础畜度**: 160
**克制系数**: 0.7 (被3个英雄克制)
**位置系数**: 1.2 (核心位责任大)
**经济背景系数**: 1.0 (均势期)

**一句话总结**: 作为中单未能建立优势,反而被压制,治疗量作为戴泽严重不合格。
```

### 4. 罪状详情

每个罪状都要有充分的数据支撑:

```markdown
#### 【SSS级罪状】作为治疗英雄治疗量严重不足

- **你的治疗量**: 6,300 (全场)
- **队内平均**: 6,800
- **标准戴泽治疗量**: 15,000+ (同时长比赛)
- **差距**: 仅达到预期的42%

**为什么严重**:
戴泽的核心能力就是治疗和保护队友。你拿了中路资源,却没有发挥英雄特长。队友在团战中因缺乏治疗而阵亡多次,直接导致团战失利。

**数据来源**: 概览页 - 英雄治疗列
```

### 5. 数据对比表格

清晰的表格对比,让数据一目了然:

```markdown
| 指标 | ssdsdbcx(戴泽) | 队内平均 | 队内最佳 | 对手中单(斯温) |
|-----|---------------|---------|---------|---------------|
| KDA | 4/10/6 (1.0) | 6.8/9.2/9.4 | 10/3/14 | 1/3/30 (10.3) |
| GPM | 422 | 369 | 443 | 523 |
| XPM | 588 | 482 | 530 | 689 |
| 英雄伤害 | 25.6k | 25.4k | 37.4k | 26.3k |
| 英雄治疗 | 6.3k ⚠️ | 6.8k | 13.5k | 8.1k |
| 参团率 | 45% ⚠️ | 68% | 91% | 72% |
| 对线胜率 | 72.64% | 59.2% | 75.85% | 54.71% |

⚠️ = 明显低于预期
```

### 6. 幽默惩罚建议

幽默但不过分,保持娱乐性:

```markdown
## 🎪 惩罚建议

ssdsdbcx,作为本场比赛的第一畜生,我们建议你:

1. **看录像10遍** - 特别关注你在团战中的治疗时机
2. **打50把戴泽** - 直到你知道R键(薄葬)不是装饰品
3. **给队友道歉** - 特别是那个在你面前死掉的赏金
4. **去训练模式练习** - 治疗量6.3k?连我奶妈都比你强
5. **反思BP** - 被克制就算了,为什么还要选?

**额外惩罚**: 下次打戴泽前,请先去看看职业选手的戴泽教学视频。
```

### 7. 一句话总结

犀利但有趣的总结,可以是疑问、评价或建议:

```markdown
## 💬 一句话总结

你玩戴泽治疗量6.3k,是不是把"Dazzle"看成了"Dazed"(眩晕)?
```

或:

```markdown
## 💬 一句话总结

中路戴泽对线优势,然后呢?团战在哪?治疗在哪?你人在哪?
```

或:

```markdown
## 💬 一句话总结

如果治疗是一门艺术,那你就是一个灵魂画手。
```

## 特殊情况输出

### 多个畜生

如果判定有2个畜生:

```markdown
## 🎯 畜生判定

经过科学分析,本场比赛有**2个畜生**:

### 🐷 第一畜: {name1} ({hero1})
{details}

### 🐷 第二畜: {name2} ({hero2})
{details}

**说明**: 两人畜度都很高,难分伯仲,都需要对本局失利负主要责任。
```

### 无明显畜生

如果所有人畜度都不高:

```markdown
## 🎯 分析结果

本场比赛**无明显畜生**。

全队畜度都在合理范围内,这是一场团队整体失利:
- 可能是阵容劣势
- 可能是运营问题
- 可能是对手太强

**排名**: (仍列出排名,但说明都在正常范围)

**建议**: 全队一起复盘,找出团队层面的问题。
```

### 数据不完整警告

如果数据不完整:

```markdown
## ⚠️ 数据完整度警告

本次分析基于不完整的数据:

**缺失数据**:
- ❌ 团战详细数据
- ❌ ProTracker克制数据
- ✅ 基础数据
- ✅ 对线数据

**影响**:
- 无法精确计算参团率
- 克制系数使用默认值1.0
- 畜度评分可能不够准确

**建议**: 等待OpenDota分析完成后重新运行 `/抓畜 {match_id}`
```

## 输出格式建议

### 文件格式

- **文件名**: `{match_id}.md`
- **路径**: `/d/projects/who-is-to-blame/results/`
- **编码**: UTF-8

### Markdown风格

- 使用标准Markdown语法
- 适当使用emoji增加可读性
- 使用表格展示数据对比
- 使用引用块突出重要信息
- 使用代码块展示计算过程

### 长度控制

- 完整报告: 500-1000行
- 简化报告: 200-300行(数据不完整时)
- 关键信息优先,避免冗余

## 控制台输出

除了保存到文件,还要在控制台输出简要结果:

```python
def print_console_summary(report):
    print("\n" + "="*50)
    print("🐷 抓畜结果")
    print("="*50)

    for bastard in report.bastards:
        print(f"\n【畜生】{bastard.name} ({bastard.hero})")
        print(f"畜度: {bastard.final_score}/200")
        print(f"主要罪状:")
        for charge in bastard.top_charges[:3]:
            print(f"  - {charge.level}级: {charge.description}")

    print(f"\n完整报告已保存到:")
    print(f"  {report.file_path}")
    print("\n" + "="*50 + "\n")
```

## 示例输出

完整的示例报告已保存在:
`/d/projects/who-is-to-blame/results/8669004890.md` (将在实际分析时生成)

## 总结

好的输出报告应该:

1. ✅ **数据充分**: 每个结论都有数据支撑
2. ✅ **逻辑清晰**: 从数据到结论,一步步推导
3. ✅ **对比明显**: 使用表格对比,凸显差距
4. ✅ **幽默适度**: 娱乐性强,但不过分嘲讽
5. ✅ **格式美观**: 排版清晰,易于阅读
6. ✅ **可操作性**: 给出具体建议,而不只是批评

**核心目标**: 让用户一眼就能看懂谁是畜生,为什么是畜生,差距有多大。
